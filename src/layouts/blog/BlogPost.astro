---
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";
import FormattedDate from "../../components/blog/FormattedDate.astro";
import Head from "../../components/blog/Head.astro";
import Header from "../../components/blog/Header.astro";
import Footer from "../../components/Footer.astro";

type Props = CollectionEntry<"blog">["data"];

const {
  title,
  description,
  author,
  authorAvatar,
  pubDate,
  updatedDate,
  heroImage,
  keywords,
} = Astro.props;
---

<html class="dark" lang="en">
<Head
  title={title}
  description={description}
  image={heroImage ?? '/images/social.blog.png'}
  keywords={keywords}
/>
<body class="bg-antropia-white dark:bg-ash text-black dark:text-white">
<Header />

<main class="center font-nudica flex">
  <article class="w-full">
    <div class="prose px-6">
      <div class="mb-8 flex flex-col items-center">
        <p
          id="blog-title"
          class="font-round8 text-blinking-blue mb-0! text-center text-[26vw] whitespace-pre-wrap leading-[80%] font-bold uppercase md:text-9xl xl:text-12xl dark:text-white w-full px-4 max-w-content"
        >
          {title.replace(/ /g, '   ')}
        </p>

        <div class="flex flex-row gap-4 items-center">

          <!-- Author -->
          <div class="flex flex-row gap-2 items-center">
            <Image width={38} height={38} src={authorAvatar} alt=""
                   class="rounded-full border-2 border-sasquatch-socks" />
            <p class="text-base font-bold text-white/80 mb-0!">{author}</p>
          </div>

          <!-- Date -->
          <p class="text-base font-light text-white/50 mb-0!">
            <FormattedDate date={pubDate} />
            {
              updatedDate && (
                <div>
                  Last updated on
                  <FormattedDate date={updatedDate} />
                </div>
              )
            }
          </p>

          <div class="flex flex-row items-center gap-2 mb-0! flex-1">
            {keywords?.map((keyword) => (
              <a
                class="truncate border-2 border-sasquatch-socks rounded-full text-sm font-base! pb-0.5 px-2 decoration-0 hover:bg-sasquatch-socks hover:text-white!"
                href="/blog">{keyword}</a>
            ))}
          </div>
        </div>

        <p class="mt-4 px-10 text-center text-xl font-normal italic">
          {description}
        </p>


        <div class="hero-image">
          {
            heroImage && (
              <Image
                width={1020}
                height={510}
                src={heroImage}
                alt=""
                style="border-radius: 1rem"
              />
            )
          }
        </div>
      </div>

      <slot />
    </div>
  </article>
</main>

<div class="pb-16">
  <Footer />
</div>
</body>
</html>
